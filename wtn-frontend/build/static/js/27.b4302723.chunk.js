(this["webpackJsonpdevias-material-kit-pro"]=this["webpackJsonpdevias-material-kit-pro"]||[]).push([[27],{1048:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(27),i=a(1),o=a.n(i),s=a(4),l=a(16),u=a(57),m=a(53),d=r.a.createContext(),p=function(){var e=r.a.useContext(d);if(void 0===e)throw new Error("useTestDetailsContext must be used within a TestDetailsProvider");return e},v=function(e){var t=e.testId,a=r.a.useState([]),c=Object(l.a)(a,2),i=c[0],p=c[1],v=r.a.useState(null),f=Object(l.a)(v,2),b=f[0],g=f[1],x=r.a.useState([]),E=Object(l.a)(x,2),h=E[0],w=E[1],j=r.a.useState(null),k=Object(l.a)(j,2),O=k[0],C=k[1],y=Object(u.b)(),S=Object(n.useCallback)(Object(s.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/exams/".concat(t));case 3:return e.next=5,e.sent.data;case 5:a=e.sent,p(a.data),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])}))),[t]),_=Object(n.useCallback)(Object(s.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/exams/attempt/".concat(t,"/").concat(y.user.user_id));case 3:return e.next=5,e.sent.data;case 5:a=e.sent,g(a.data),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])}))),[y.user.user_id,t]),D=Object(n.useCallback)(Object(s.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/exam-questions/exam/".concat(t));case 3:return e.next=5,e.sent.data;case 5:a=e.sent,w(a.data),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])}))),[t]),T=Object(n.useCallback)(Object(s.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.get("/exam-answers/result/".concat(b.id));case 3:return e.next=5,e.sent.data;case 5:t=e.sent,C(t.data),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])}))),[b]);r.a.useEffect((function(){S(),_(),D()}),[_,D,S]),r.a.useEffect((function(){(null===b||void 0===b?void 0:b.id)&&T()}),[b,T]),r.a.useEffect((function(){console.log(O)}),[O]);var N=r.a.useMemo((function(){return{result:O,questions:h,attempt:b,testDetails:i,createAttempt:function(){var e=Object(s.a)(o.a.mark((function e(){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/exams/attempt",{exam_id:t,user_id:y.user.user_id});case 3:return e.next=5,e.sent.data;case 5:a=e.sent,g(a.data),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),submitAttempt:function(){var e=Object(s.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m.a.post("/exam-answers/submit",{attempt_id:b.id,answers:t});case 3:return e.next=5,e.sent.data;case 5:_(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}}),[b,y.user.user_id,_,h,O,i,t]);return r.a.createElement(d.Provider,{value:N},e.children)},f=a(861),b=a(263),g=a(151),x=a(76),E=a(842),h=a(843),w=a(863),j=a(824),k=a(827),O=a(1032),C=a(40),y=a(215),S=a(3),_=a(1033),D=Object(b.a)((function(e){return{root:{padding:e.spacing(3),"& .time":{fontSize:"32px",textAlign:"center"}},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem 1.5rem"},paginate:{padding:0,justifyContent:"center"},question:{padding:"1rem 2rem",margin:"2rem 0"},option:{marginTop:"0.5rem",marginLeft:0,marginRight:0,borderRadius:"0.5rem",border:"1px solid",borderColor:e.palette.primary.light,boxSizing:"border-box",minHeight:40,"&:hover *":{fontWeight:"bold"}},selected:{backgroundColor:e.palette.primary.main,"& *":{color:"white",fontWeight:"bold"}}}})),T={isPlaying:!0,size:120,strokeWidth:6},N=function(){var e=D(),t=p(),a=t.testDetails,n=t.questions,c=t.submitAttempt,i=t.attempt,o=Object(y.e)(),s=function(e){var t=Object.keys(e).map((function(t){return{question_id:t,answer:e[t]}}));c(t)},l=Date.now()/1e3,u=new Date(null===i||void 0===i?void 0:i.timeup)/1e3,m=u-new Date(null===i||void 0===i?void 0:i.start_time)/1e3,d=u-l;return r.a.createElement(C.i,{className:e.root,title:"Ki\u1ec3m tra"},r.a.createElement(g.a,{className:e.header},r.a.createElement(f.a,null,r.a.createElement(x.a,{variant:"h1",className:"mb-3"},null===a||void 0===a?void 0:a.name)),r.a.createElement(O.CountdownCircleTimer,Object.assign({},T,{colors:[["#3f51b5"]],duration:m,initialRemainingTime:d,onComplete:function(e){return e>=d?(s(o.getValues()),[!1]):[!0]}}),(function(e){var t,a=e.elapsedTime;return t=Object(_.toInteger)((m-a)/60)+":"+Object(_.toInteger)((m-a)%60),r.a.createElement("div",{className:"time-wrapper"},r.a.createElement("div",{className:"time"},t))}))),r.a.createElement("form",{autoComplete:"off",onSubmit:o.handleSubmit(s)},null===n||void 0===n?void 0:n.map((function(t,a){var n=["A","B","C","D"];return r.a.createElement(g.a,{className:e.question},r.a.createElement(x.a,{variant:"h5"},"C\xe2u ",a+1,": ",t.content),r.a.createElement(y.a,{control:o.control,name:t.id,render:function(a){var c,i=a.field;return r.a.createElement(E.a,i,null===(c=t.options)||void 0===c?void 0:c.map((function(a,c){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{className:Object(S.a)(e.option,o.watch(t.id)===a.id&&e.selected),value:a.id,control:r.a.createElement(w.a,null),label:n[c]+". "+a.content}),r.a.createElement(j.a,{variant:"fullWidth"}))})))}}))})),r.a.createElement(f.a,{mt:3},r.a.createElement(k.a,{type:"submit",variant:"contained",color:"primary",fullWidth:!0,size:"large"},"Submit"))))},A=a(849),I=a(821),q=a(839),z=a(795);function W(e){var t=new Date(e),a=6e4*t.getTimezoneOffset();return new Date(t.getTime()+a)}var B=Object(b.a)((function(e){return{root:{margin:e.spacing(4),padding:e.spacing(4),overflow:"hidden"}}})),L=Object(z.a)((function(e){return{colorPrimary:{backgroundColor:"#388e3c"},colorSecondary:{backgroundColor:"#f57c00"},badge:{padding:"0 0.5rem"},root:{marginLeft:e.spacing(4)}}}))(A.a),P=function(e){var t=B(),a=p(),n=a.testDetails,c=a.attempt,i=a.createAttempt,o=a.result;if(!n)return null;var s=Date.now(),l=W(n.end_time)<s,u=W(n.start_time)<s,m=u&&!l&&!c,d=!l&&c&&!c.submitted;return r.a.createElement(I.a,{className:t.root},r.a.createElement(q.a,{container:!0,spacing:4,justifyContent:"center",alignItems:"center"},r.a.createElement(q.a,{item:!0,xs:12},r.a.createElement(x.a,{gutterBottom:!0,variant:"h3"},"T\xean b\xe0i ki\u1ec3m tra:"),r.a.createElement(x.a,{variant:"h1"},n.name)),r.a.createElement(q.a,{item:!0,xs:12,md:6},r.a.createElement(x.a,{color:"textSecondary",variant:"h4"},"B\u1eaft \u0111\u1ea7u: ",W(n.start_time).toLocaleString())),r.a.createElement(q.a,{item:!0,xs:12,md:6},r.a.createElement(x.a,{color:"textSecondary",variant:"h4"},"K\u1ebft th\xfac: ",W(n.end_time).toLocaleString())),r.a.createElement(q.a,{item:!0,xs:12},r.a.createElement(x.a,{color:"textSecondary",variant:"h4"},"Th\u1eddi gian l\xe0m b\xe0i: ",n.duration," ph\xfat")),r.a.createElement(q.a,{justifyContent:"flex-start",item:!0,xs:6},u&&!l&&r.a.createElement(L,{badgeContent:"Started",color:"secondary"}),u&&l&&r.a.createElement(L,{badgeContent:"Ended",color:"error"}),!u&&!l&&r.a.createElement(L,{badgeContent:"Upcoming",color:"primary"})),r.a.createElement(q.a,{item:!0,xs:6},m&&r.a.createElement(k.a,{onClick:i,variant:"outlined",color:"primary"},"B\u1eaft \u0111\u1ea7u"),d&&r.a.createElement(k.a,{variant:"outlined",color:"primary"},"Ti\u1ebfp t\u1ee5c"),o&&r.a.createElement(x.a,{color:"textSecondary",variant:"h6"},"\u0110i\u1ec3m: ",o.correctAnswers,"/",o.totalQuestions))))},R=Object(b.a)((function(e){return{root:{}}})),J=function(e){var t=R(),a=p().attempt;return console.log(a),r.a.createElement(f.a,{className:t.root},a&&!(null===a||void 0===a?void 0:a.submitted)&&r.a.createElement(N,null),(!a||(null===a||void 0===a?void 0:a.submitted))&&r.a.createElement(P,null))};t.default=function(){var e=Object(c.h)().testId;return r.a.createElement(v,{testId:e},r.a.createElement(J,null))}}}]);
//# sourceMappingURL=27.b4302723.chunk.js.map